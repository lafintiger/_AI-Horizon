{% extends "base.html" %}

{% block title %}Search - AI-Horizon{% endblock %}

{% block extra_styles %}
<style>
    .search-page {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0;
    }

    .page-header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px 0;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 15px;
        margin: -40px -40px 40px -40px;
    }

    .page-header h1 {
        margin: 0 0 10px 0;
        font-size: 2.5rem;
        font-weight: 700;
    }

    .page-subtitle {
        font-size: 1.2rem;
        opacity: 0.9;
        margin-bottom: 20px;
    }

    .search-section {
        margin-bottom: 40px;
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        border: 1px solid #e2e8f0;
    }

    .search-card {
        background: #ffffff;
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 30px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        border: 1px solid #e2e8f0;
    }

    .card-header {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 2px solid #f1f5f9;
    }

    .card-icon {
        font-size: 2rem;
        margin-right: 15px;
    }

    .card-title {
        font-size: 1.4rem;
        font-weight: 700;
        color: #2d3748;
        margin: 0;
    }

    .card-description {
        color: #4a5568;
        line-height: 1.6;
        margin-bottom: 20px;
        font-size: 1rem;
    }

    .card-features {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 20px;
    }

    .feature-tag {
        background: linear-gradient(135deg, #e6fffa 0%, #b2f5ea 100%);
        color: #234e52;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
        border: 1px solid #81e6d9;
    }

    .card-controls {
        background: #f8fafc;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
    }

    .controls-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
    }

    .control-group {
        display: flex;
        flex-direction: column;
    }

    .control-group label {
        font-weight: 600;
        color: #4a5568;
        margin-bottom: 5px;
        font-size: 0.9rem;
    }

    .control-group select {
        padding: 10px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        background: white;
        font-size: 0.9rem;
        transition: border-color 0.3s ease;
    }

    .control-group select:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .card-actions {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        justify-content: center;
        margin-bottom: 20px;
    }

    .btn-primary, .btn-secondary {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 0.95rem;
    }

    .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .btn-primary:hover {
        background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }

    .btn-secondary {
        background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        color: white;
    }

    .btn-secondary:hover {
        background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
        transform: translateY(-1px);
    }

    .card-results {
        margin-top: 20px;
        padding: 20px;
        background: #f7fafc;
        border-radius: 8px;
        border: 1px solid #e2e8f0;
    }

    .results-summary {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }

    .result-metric {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        background: white;
        border-radius: 6px;
        border-left: 4px solid #667eea;
    }

    .result-metric .metric-label {
        color: #4a5568;
        font-weight: 500;
    }

    .result-metric .metric-value {
        color: #2d3748;
        font-weight: bold;
    }

    .search-highlights {
        margin-top: 20px;
        padding: 20px;
        background: #f0f9ff;
        border-radius: 8px;
        border-left: 4px solid #3b82f6;
    }

    .search-highlights h4 {
        margin-top: 0;
        margin-bottom: 15px;
        color: #1e40af;
        font-size: 1.2em;
    }

    .search-highlights p {
        color: #475569;
        line-height: 1.6;
        margin-bottom: 15px;
    }

    .top-skills-list {
        margin-top: 15px;
    }

    .discovery-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 0;
        border-bottom: 1px solid #e2e8f0;
    }

    .discovery-item:last-child {
        border-bottom: none;
    }

    .skill-rank {
        background: #667eea;
        color: white;
        padding: 4px 8px;
        border-radius: 50%;
        font-size: 0.8rem;
        font-weight: bold;
        min-width: 24px;
        text-align: center;
    }

    .skill-name {
        flex: 1;
        font-weight: 600;
        color: #2d3748;
    }

    .relevance-score {
        background: #48bb78;
        color: white;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: 500;
    }

    .view-report {
        margin-top: 20px;
        text-align: center;
    }

    .view-report a {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 20px;
        background: #667eea;
        color: white;
        text-decoration: none;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .view-report a:hover {
        background: #5a67d8;
        transform: translateY(-2px);
    }

    .loading-container {
        display: none;
        text-align: center;
        padding: 30px;
        background: #f8fafc;
        border-radius: 8px;
        border: 1px solid #e2e8f0;
        margin-top: 20px;
    }

    .loading-spinner {
        border: 4px solid #f3f4f6;
        border-top: 4px solid #667eea;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 15px;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .loading-text {
        font-size: 1rem;
        font-weight: 500;
    }

    .error {
        background: #fed7d7;
        color: #c53030;
        padding: 15px;
        border-radius: 8px;
        border: 1px solid #feb2b2;
    }

    .real-time-status {
        background: #f7fafc;
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        border: 1px solid #e2e8f0;
        display: none;
    }

    .status-header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
    }

    .status-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #48bb78;
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
    }

    .status-logs {
        max-height: 300px;
        overflow-y: auto;
        background: #2d3748;
        color: #e2e8f0;
        padding: 15px;
        border-radius: 6px;
        font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        font-size: 0.85rem;
        line-height: 1.4;
    }

    .log-entry {
        margin-bottom: 5px;
        padding: 2px 0;
    }

    .log-entry.info { color: #68d391; }
    .log-entry.warning { color: #fbb02d; }
    .log-entry.error { color: #f56565; }
    .log-entry.search { color: #63b3ed; }

    .search-progress {
        display: none;
        margin-top: 15px;
    }

    .progress-bar {
        width: 100%;
        height: 8px;
        background: #e2e8f0;
        border-radius: 4px;
        overflow: hidden;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea, #764ba2);
        transition: width 0.3s ease;
        width: 0%;
    }

    .progress-text {
        text-align: center;
        margin-top: 8px;
        font-size: 0.9rem;
        color: #4a5568;
    }

    .search-metrics {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
        margin-top: 15px;
    }

    .metric-card {
        background: white;
        padding: 10px;
        border-radius: 6px;
        text-align: center;
        border: 1px solid #e2e8f0;
    }

    .metric-value {
        font-size: 1.5rem;
        font-weight: bold;
        color: #667eea;
    }

    .metric-label {
        font-size: 0.8rem;
        color: #718096;
        margin-top: 2px;
    }
</style>
{% endblock %}

{% block content %}
<div class="search-page">
    <div class="page-header">
        <h1>üîç Search & Discovery</h1>
        <div class="page-subtitle">
            Proactive search for emerging skills, technologies, and opportunities in cybersecurity
        </div>
    </div>

    <div class="search-section">
        <div class="search-card" id="ai-skills-search-card">
            <div class="card-header">
                <div class="card-icon">üîç</div>
                <div class="card-title">AI Skills Search</div>
            </div>
            <div class="card-description">
                <strong>PROACTIVE DISCOVERY:</strong> Searches diverse sources for emerging AI skills that cybersecurity professionals need, including skills not explicitly labeled as "cybersecurity."
            </div>
            <div class="card-features">
                <span class="feature-tag">üîç PROACTIVE SEARCH</span>
                <span class="feature-tag">üåê DIVERSE SOURCES</span>
                <span class="feature-tag">üîÑ CROSS-DOMAIN</span>
                <span class="feature-tag">üíæ DATABASE STORAGE</span>
            </div>
            
            <div class="card-controls">
                <div class="controls-grid">
                    <div class="control-group">
                        <label for="searchFocusSelect">Search Focus:</label>
                        <select id="searchFocusSelect">
                            <option value="emerging_skills" selected>Emerging AI Skills</option>
                            <option value="technical_capabilities">Technical Capabilities</option>
                            <option value="strategic_skills">Strategic & Leadership</option>
                            <option value="cross_domain">Cross-Domain Opportunities</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="searchTimeframeSelect">Time Horizon:</label>
                        <select id="searchTimeframeSelect">
                            <option value="3months">3 Months (Immediate)</option>
                            <option value="6months" selected>6 Months (Near-term)</option>
                            <option value="12months">12 Months (Strategic)</option>
                            <option value="24months">24 Months (Long-term)</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="searchScopeSelect">Search Scope:</label>
                        <select id="searchScopeSelect">
                            <option value="focused">Focused (Cybersecurity+AI)</option>
                            <option value="comprehensive" selected>Comprehensive (All Domains)</option>
                            <option value="experimental">Experimental (Research + Startups)</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="storeInDatabaseSelect">Store Results:</label>
                        <select id="storeInDatabaseSelect">
                            <option value="true" selected>Yes - Save to Database</option>
                            <option value="false">No - View Only</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="card-actions">
                <button class="btn-primary" onclick="runAISkillsSearch()">üîç Search Emerging Skills</button>
                <button class="btn-secondary" onclick="viewStoredSkills()">üíæ View Stored Skills</button>
            </div>
            
            <div class="card-results" id="skillsSearchResults" style="display: none;">
                <div class="results-summary">
                    <div class="result-metric">
                        <span class="metric-label">Skills Discovered:</span>
                        <span class="metric-value" id="skillsDiscovered">-</span>
                    </div>
                    <div class="result-metric">
                        <span class="metric-label">Trending Tech:</span>
                        <span class="metric-value" id="trendingTech">-</span>
                    </div>
                    <div class="result-metric">
                        <span class="metric-label">Cross-Domain:</span>
                        <span class="metric-value" id="crossDomainOpps">-</span>
                    </div>
                    <div class="result-metric">
                        <span class="metric-label">Stored in DB:</span>
                        <span class="metric-value" id="skillsStored">-</span>
                    </div>
                </div>
                <div class="search-highlights">
                    <h4>üîç PROACTIVE DISCOVERY:</h4>
                    <p>These skills were found by searching beyond cybersecurity-specific content to identify emerging capabilities that provide competitive advantages.</p>
                    <div class="top-discoveries" id="topDiscoveries">
                        <!-- Top discovered skills will be populated here -->
                    </div>
                </div>
                <div class="view-report">
                    <a href="#" id="skillsSearchReportLink" target="_blank">üîç View Search Results</a>
                </div>
            </div>
            
            <div class="loading-container" id="skillsSearchLoading" style="display: none;">
                <div class="loading-spinner"></div>
                <div class="loading-text">Searching diverse sources for emerging AI skills and cross-domain opportunities...</div>
            </div>
            
            <!-- Real-time Status Monitoring -->
            <div class="real-time-status" id="realTimeStatus">
                <div class="status-header">
                    <div class="status-indicator" id="statusIndicator"></div>
                    <h4>üîç Real-time Search Status</h4>
                    <button class="btn-secondary" style="margin-left: auto; padding: 5px 12px; font-size: 0.8rem;" onclick="toggleSearchProgress()">
                        üìä Toggle Progress View
                    </button>
                </div>
                
                <div class="search-progress" id="searchProgress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">Initializing search...</div>
                    
                    <div class="search-metrics" id="searchMetrics">
                        <div class="metric-card">
                            <div class="metric-value" id="queriesCompleted">0</div>
                            <div class="metric-label">Queries Completed</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="skillsFound">0</div>
                            <div class="metric-label">Skills Found</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="sourcesSearched">0</div>
                            <div class="metric-label">Sources Searched</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="searchTime">0s</div>
                            <div class="metric-label">Search Time</div>
                        </div>
                    </div>
                </div>
                
                <div class="status-logs" id="statusLogs">
                    <div class="log-entry info">üîç Real-time search monitoring initialized</div>
                    <div class="log-entry info">üì° Connected to status stream</div>
                </div>
            </div>
            
<script>
// Real-time monitoring variables
let eventSource = null;
let searchStartTime = null;
let searchMetrics = {
    queriesCompleted: 0,
    skillsFound: 0,
    sourcesSearched: 0
};

// Initialize real-time monitoring when page loads
document.addEventListener('DOMContentLoaded', function() {
    initializeRealTimeMonitoring();
});

function initializeRealTimeMonitoring() {
    if (eventSource) {
        eventSource.close();
    }
    
    eventSource = new EventSource('/api/stream');
    
    eventSource.onmessage = function(event) {
        try {
            const data = JSON.parse(event.data);
            updateRealTimeStatus(data);
        } catch (e) {
            console.error('Error parsing stream data:', e);
        }
    };
    
    eventSource.onerror = function(error) {
        console.error('EventSource failed:', error);
        addLogEntry('‚ö†Ô∏è Connection to real-time status lost. Attempting to reconnect...', 'warning');
        
        // Attempt to reconnect after 5 seconds
        setTimeout(() => {
            initializeRealTimeMonitoring();
        }, 5000);
    };
    
    eventSource.onopen = function() {
        addLogEntry('‚úÖ Connected to real-time status stream', 'info');
    };
}

function updateRealTimeStatus(data) {
    // Handle heartbeat
    if (data.heartbeat) {
        return;
    }
    
    // Update logs
    if (data.logs && data.logs.length > 0) {
        const latestLogs = data.logs.slice(-5); // Show last 5 logs
        latestLogs.forEach(log => {
            if (log.category === 'SEARCH' || log.message.toLowerCase().includes('skill')) {
                const logClass = log.level.toLowerCase();
                addLogEntry(`[${log.timestamp}] ${log.message}`, logClass);
                
                // Update metrics based on log content
                updateSearchMetrics(log.message);
            }
        });
    }
    
    // Update progress if search is running
    if (data.status && data.status.operation && data.status.operation.includes('Skills Search')) {
        updateSearchProgress(data.status);
    }
}

function updateSearchMetrics(logMessage) {
    const message = logMessage.toLowerCase();
    
    if (message.includes('starting ai skills search')) {
        searchStartTime = Date.now();
        resetSearchMetrics();
        document.getElementById('searchProgress').style.display = 'block';
    }
    
    if (message.includes('query') || message.includes('searching')) {
        searchMetrics.queriesCompleted++;
        document.getElementById('queriesCompleted').textContent = searchMetrics.queriesCompleted;
    }
    
    if (message.includes('discovered') || message.includes('found')) {
        const skillMatch = message.match(/(\d+)\s+skill/);
        if (skillMatch) {
            searchMetrics.skillsFound = parseInt(skillMatch[1]);
            document.getElementById('skillsFound').textContent = searchMetrics.skillsFound;
        }
    }
    
    if (message.includes('source') || message.includes('category')) {
        searchMetrics.sourcesSearched++;
        document.getElementById('sourcesSearched').textContent = searchMetrics.sourcesSearched;
    }
    
    // Update search time
    if (searchStartTime) {
        const elapsed = Math.floor((Date.now() - searchStartTime) / 1000);
        document.getElementById('searchTime').textContent = `${elapsed}s`;
    }
}

function updateSearchProgress(status) {
    if (status.progress) {
        const progressPercent = (status.progress.current / status.progress.total) * 100;
        document.getElementById('progressFill').style.width = `${progressPercent}%`;
        document.getElementById('progressText').textContent = `${status.progress.status || 'Searching...'} (${status.progress.current}/${status.progress.total})`;
    }
}

function resetSearchMetrics() {
    searchMetrics = { queriesCompleted: 0, skillsFound: 0, sourcesSearched: 0 };
    document.getElementById('queriesCompleted').textContent = '0';
    document.getElementById('skillsFound').textContent = '0';
    document.getElementById('sourcesSearched').textContent = '0';
    document.getElementById('searchTime').textContent = '0s';
    document.getElementById('progressFill').style.width = '0%';
    document.getElementById('progressText').textContent = 'Initializing search...';
}

function addLogEntry(message, level = 'info') {
    const logsContainer = document.getElementById('statusLogs');
    const timestamp = new Date().toLocaleTimeString();
    
    const logEntry = document.createElement('div');
    logEntry.className = `log-entry ${level}`;
    logEntry.textContent = `[${timestamp}] ${message}`;
    
    logsContainer.appendChild(logEntry);
    
    // Keep only the last 20 log entries
    const logEntries = logsContainer.querySelectorAll('.log-entry');
    if (logEntries.length > 20) {
        logEntries[0].remove();
    }
    
    // Auto-scroll to bottom
    logsContainer.scrollTop = logsContainer.scrollHeight;
}

function toggleSearchProgress() {
    const progressDiv = document.getElementById('searchProgress');
    const isVisible = progressDiv.style.display !== 'none';
    progressDiv.style.display = isVisible ? 'none' : 'block';
}

async function runAISkillsSearch() {
    const button = document.querySelector('#ai-skills-search-card .btn-primary');
    const results = document.getElementById('skillsSearchResults');
    const loading = document.getElementById('skillsSearchLoading');
    const realTimeStatus = document.getElementById('realTimeStatus');
    
    const focusArea = document.getElementById('searchFocusSelect').value;
    const timeframe = document.getElementById('searchTimeframeSelect').value;
    const searchScope = document.getElementById('searchScopeSelect').value;
    const storeInDatabase = document.getElementById('storeInDatabaseSelect').value === 'true';
    
    button.disabled = true;
    button.innerHTML = 'üîç Searching...';
    loading.style.display = 'block';
    realTimeStatus.style.display = 'block';
    results.style.display = 'none';
    
    // Reset and show progress
    resetSearchMetrics();
    searchStartTime = Date.now();
    document.getElementById('searchProgress').style.display = 'block';
    addLogEntry(`üîç Starting AI skills search - Focus: ${focusArea}, Timeframe: ${timeframe}`, 'search');
    
    try {
        const response = await fetch('/api/run_ai_skills_search', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                focus_area: focusArea,
                timeframe: timeframe,
                search_scope: searchScope,
                store_in_database: storeInDatabase
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            const summary = data.summary || {};
            
            document.getElementById('skillsDiscovered').textContent = summary.total_skills_discovered || 0;
            document.getElementById('trendingTech').textContent = summary.trending_technologies || 0;
            document.getElementById('crossDomainOpps').textContent = summary.cross_domain_opportunities || 0;
            document.getElementById('skillsStored').textContent = summary.skills_stored_in_db || (storeInDatabase ? summary.total_skills_discovered : 0);
            
            const topDiscoveriesEl = document.getElementById('topDiscoveries');
            if (summary.top_skills && summary.top_skills.length > 0) {
                let topSkillsHtml = '<div class="top-skills-list">';
                summary.top_skills.forEach((skill, index) => {
                    const relevancePercent = Math.round(skill.relevance * 100);
                    topSkillsHtml += `
                        <div class="discovery-item">
                            <span class="skill-rank">${index + 1}</span>
                            <span class="skill-name">${skill.name}</span>
                            <span class="relevance-score">${relevancePercent}% relevant</span>
                        </div>`;
                });
                topSkillsHtml += '</div>';
                topDiscoveriesEl.innerHTML = topSkillsHtml;
            }
            
            const reportLinkEl = document.getElementById('skillsSearchReportLink');
            if (reportLinkEl && data.report_path) {
                reportLinkEl.href = `/api/view_report?path=${encodeURIComponent(data.report_path)}`;
                reportLinkEl.style.display = 'inline-flex';
            }
            
            results.style.display = 'block';
            
            if (storeInDatabase && summary.skills_stored_in_db > 0) {
                showNotification(`Successfully stored ${summary.skills_stored_in_db} skills in database!`, 'success');
            }
        } else {
            results.innerHTML = `<div class="error">Skills search failed: ${data.error || data.message || 'Unknown error'}</div>`;
            results.style.display = 'block';
            addLogEntry(`‚ùå Search failed: ${data.error || data.message}`, 'error');
        }
    } catch (error) {
        console.error('Error:', error);
        results.innerHTML = `<div class="error">Error running skills search: ${error.message}</div>`;
        results.style.display = 'block';
        addLogEntry(`‚ùå Search error: ${error.message}`, 'error');
    } finally {
        loading.style.display = 'none';
        button.disabled = false;
        button.innerHTML = 'üîç Search Emerging Skills';
        
        // Complete the search metrics
        if (searchStartTime) {
            const totalTime = Math.floor((Date.now() - searchStartTime) / 1000);
            addLogEntry(`‚úÖ Search completed in ${totalTime} seconds`, 'info');
            document.getElementById('progressFill').style.width = '100%';
            document.getElementById('progressText').textContent = 'Search completed!';
        }
    }
}

async function viewStoredSkills() {
    // Navigate to browse entries with AI skills filter applied
    window.location.href = '/browse_entries?filter_type=ai_skills&search=AI%20Skill';
}

function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        border-radius: 8px;
        color: white;
        font-weight: 600;
        z-index: 1000;
        animation: slideIn 0.3s ease-out;
    `;
    
    if (type === 'success') {
        notification.style.background = 'linear-gradient(135deg, #48bb78 0%, #38a169 100%)';
    } else if (type === 'error') {
        notification.style.background = 'linear-gradient(135deg, #f56565 0%, #c53030 100%)';
    } else {
        notification.style.background = 'linear-gradient(135deg, #4299e1 0%, #3182ce 100%)';
    }
    
    notification.textContent = message;
    document.body.appendChild(notification);
    
    setTimeout(() => notification.remove(), 5000);
}

const style = document.createElement('style');
style.textContent = `
    @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
`;
document.head.appendChild(style);
</script>
        </div>
    </div>
</div>
{% endblock %}
